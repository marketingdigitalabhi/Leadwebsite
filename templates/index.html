<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leads Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f5f7fa;
      padding: 30px;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #1f2937;
      margin-bottom: 30px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      background: #fff;
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 12px 15px;
      text-align: left;
    }
    thead {
      background: #1f2937;
      color: #fff;
    }
    tbody tr:nth-child(even) {
      background: #f0f2f5;
    }
    tbody tr:hover {
      background: #e0e7ff;
    }
    th {
      font-weight: 600;
    }
  </style>
</head>
<body>

<h1>Leads Dashboard</h1>

<table id="data-table">
  <thead></thead>
  <tbody></tbody>
</table>

<script>
  const columnsToShow = [
    "created_time",
    "platform",
    "what_is_your_budget_?",
    "email",
    "full_name",
    "phone",
    "work_phone_number"
  ];

  async function fetchData() {
    const res = await fetch("/api/data");
    const data = await res.json();

    if (data.length > 0) {
      // Build table header
      let tableHead = "<tr>";
      columnsToShow.forEach(col => {
        tableHead += `<th>${col.replace(/_/g, " ")}</th>`;
      });
      tableHead += "</tr>";
      document.querySelector("#data-table thead").innerHTML = tableHead;

      // Build table body
      let tableBody = "";
      data.forEach(row => {
        tableBody += "<tr>";
        columnsToShow.forEach(col => {
          tableBody += `<td>${row[col] || ""}</td>`;
        });
        tableBody += "</tr>";
      });
      document.querySelector("#data-table tbody").innerHTML = tableBody;
    } else {
      document.querySelector("#data-table tbody").innerHTML = "<tr><td colspan='7'>No data found</td></tr>";
    }
  }

  fetchData();
</script>

</body>
</html>
